<div class="">
  <h2 class="">
    {{ isEditingNote ? 'Edit Note' : 'Create New Note' }}
  </h2>

  <form [formGroup]="noteForm" (ngSubmit)="onSubmit()" class="">
    <div class="">
      <label for="title" class="">Title:</label>
      <input id="title" type="text" formControlName="title"
             class=""
             [class.border-red-500]="noteForm.get('title')?.invalid && (noteForm.get('title')?.dirty || noteForm.get('title')?.touched)">
      <p *ngIf="noteForm.get('title')?.invalid && (noteForm.get('title')?.dirty || noteForm.get('title')?.touched)"
         class="">
        Title is required.
      </p>
    </div>

    <div class="mb-4">
      <label for="content" class="">Content:</label>
      <textarea id="content" formControlName="content"
                class=""
                [class.border-red-500]="noteForm.get('content')?.invalid && (noteForm.get('content')?.dirty || noteForm.get('content')?.touched)">
      </textarea>
      <p *ngIf="noteForm.get('content')?.invalid && (noteForm.get('content')?.dirty || noteForm.get('content')?.touched)"
         class="">
        Content is required.
      </p>
    </div>

    <div class="tags">
      <label for="tags" class="">Tags</label>
      <input id="tags" type="text" formControlName="tags"
             class="" placeholder="Enter tags separated by commas">
    </div>
    <div class="edited-at">
      <p>Edited At: {{ lastEditedAt ? (lastEditedAt | date: 'medium') : 'Not edited yet' }}</p>
     
    </div>

    <div class="">
      <button type="submit"
              class="">
        Save Note
      </button>

      <button *ngIf="isEditingNote" type="button" (click)="confirmDelete()"
              class="">
        Delete Note
      </button>
      <button *ngIf="isEditingNote" type="button" (click)="archiveNote()"
              class="">
        {{ isArchived ? 'Unarchive Note' : 'Archive Note' }}
      </button>
    </div>
    <button type="button" (click)="backToDashboard()"
            class="">
      Back to Dashboard
    </button>
  </form>

  <div *ngIf="showConfirmDelete" class="">
    <div class="">
      <h3 class="">Confirm Deletion</h3>
      <p class="">Are you sure you want to delete this note? This action cannot be undone.</p>
      <div class="">
        <button (click)="cancelDelete()"
                class="">
          Cancel
        </button>
        <button (click)="onDelete()"
                class="">
          Delete
        </button>
      </div>
    </div>
  </div>
</div>